<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>REI Fellowship Match Probability Calculator</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- Including Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.0.2"></script>
<style>
    .header1, .header2 {
        background-color: #DDDDDD; /* Light grey background */
        color: #333; /* Dark grey text for better contrast */
        padding: 4px;
        font-size: 16px;
        font-weight: bold;
        text-align: left;
        margin-top: 2px;
        margin-bottom: 15px;
        border-radius: 2px;
    }

    body {
        font-family: 'Arial', sans-serif;
        background-color: #f5f5f5; /* This sets the whole page's background color to a neutral light grey */
        color: #333; /* Dark grey text */
        margin: 20px;
    }

    h1 {
        color: #a40000; /* Dark red color */
        text-align: center;
    }

    form {
        background-color: #ffffff; /* White background for form */
        border: 1px solid #cccccc; /* Light grey border */
        padding: 15px;
        margin: 20px auto;
        width: 600px;
        max-width: 600px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .info-box {
        background-color: #ffffff; /* White background for informational box */
        border: 1px solid #cccccc;
        padding: 15px;
        margin: 20px auto;
        width: 600px;
        max-width: 600px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        font-size: 14px;
        line-height: 1.5;
        text-align: left;
    }

    .row {
        margin-bottom: 15px;
    }
    .row label {
        font-weight: bold;
        display: block;
        margin-bottom: 5px;
    }
    .row-inline {
        margin-bottom: 15px;
        display: flex;
        align-items: center; /* Aligns the checkbox and label vertically */
    }
    .row-inline label {
        font-weight: bold;
        display: block;
        margin-bottom: 5px;
        flex: 1;
        margin-right: 10px; /* Adds some spacing between the label and the checkbox */
    }

    input[type="checkbox"] {
        width: 20px; /* Larger width for the checkbox */
        height: 20px; /* Larger height for the checkbox */
        vertical-align: middle; /* Aligns checkbox with the middle of the text */
        flex: 0 0 auto;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
        
    }
    input[type="number"], select, button {
        width: 100%;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
    }

    button {
        background-color: #a40000; /* Dark red background for buttons */
        color: white;
        border: none;
        padding: 10px 15px;
        font-size: 16px;
        cursor: pointer;
        margin-top: 10px;
    }

    button:hover {
        background-color: #7a0000; /* Slightly darker red on hover */
    }

    #result {
        font-size: 16px;
        background-color: rgba(164, 0, 0, 0.2);
        border-left: 5px solid #a40000;
        padding: 10px;
        width: 600px;
        max-width: 600px;
        margin: 20px auto;
    }

    .canvas-container {
        width: 600px;
        background-color: #ffffff;
        border: 1px solid #cccccc;
        padding: 15px;
        margin: 20px auto;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    canvas {
        width: 100% !important;
        max-width: 600px;
        height: auto !important;
    }

    .tooltip {
        position: relative;
        cursor: pointer;
    }

    .tooltip .tooltiptext {
        visibility: hidden;
        width: 300px;
        background-color: #f8f8f8; /* Light grey background for tooltips */
        color: #333;
        text-align: left;
        padding: 10px;
        border-radius: 6px;
        border: 1px solid #ccc;
        position: absolute;
        z-index: 1;
        bottom: 150%;
        left: 50%;
        transform: translateX(-50%);
        opacity: 0;
        transition: opacity 0.5s;
        font-size: 12px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .tooltip:hover .tooltiptext {
        visibility: visible;
        opacity: 1;
    }

    .tooltip:hover {
        color: #0056b3; /* Change color on hover to signal interactivity */
    }

    .tooltip-icon {
        display: inline-block;
        margin-left: 5px;
        width: 16px;
        height: 16px;
        background-image: url('path_to_info_icon.png');
        background-size: cover;
        cursor: help;
    }
</style>


</head>
<body>
<h1>REI Fellowship Match Probability Calculator</h1>
<div class="info-box">
    The prediction model is based on data from REI applications submitted to the University of Pennsylvania in 2019, 2021, 2022, and 2023, representing 99% of the total number of applications submitted to the National Resident Matching Program (NRMP) in these years.<br><br>
    <strong>Source: Humphries et al. Predicting a successful match among applicants to reproductive endocrinology and infertility fellowship.</strong>
</div>
<form>
    <div class="header1">Medical School</div>
    <div class="row">
        <div>
            <input type="radio" name="medschooltype" value="1" checked> Allopathic U.S.
            <input type="radio" name="medschooltype" value="2"> Osteopathic U.S.
            <input type="radio" name="medschooltype" value="3"> International
        </div>
    </div>
    <div class="header2">Residency</div>
    <div class="row">
        <label for="doximityCategory4">Residency program (by state):</label>
        <select id="doximityCategory4">
            <option value="" disabled selected>Select</option>  
            <option value="4">AL - University of Alabama Medical Center</option>
            <option value="1">AL - University of South Alabama College of Medicine/USA Health</option>
            <option value="2">AR - University of Arkansas for Medical Sciences (UAMS) College of Medicine</option>
            <option value="1">AZ - Creighton University School of Medicine (Phoenix)</option>
            <option value="3">AZ - University of Arizona College of Medicine-Phoenix</option>
            <option value="1">AZ - University of Arizona College of Medicine-Tucson</option>
            <option value="1">CA - Adventist Health White Memorial</option>
            <option value="1">CA - Arrowhead Regional Medical Center</option>
            <option value="3">CA - Cedars-Sinai Medical Center</option>
            <option value="1">CA - HCA Healthcare Riverside</option>
            <option value="2">CA - Kaiser Permanente Northern California (Oakland)</option>
            <option value="3">CA - Kaiser Permanente Northern California (San Francisco)</option>
            <option value="3">CA - Kaiser Permanente Northern California (Santa Clara)</option>
            <option value="1">CA - Kaiser Permanente Southern California (Los Angeles)</option>
            <option value="1">CA - Kern Medical Center</option>
            <option value="1">CA - Loma Linda University Health Education Consortium</option>
            <option value="3">CA - Los Angeles County-Harbor-UCLA Medical Center</option>
            <option value="1">CA - Marian Regional Medical Center</option>
            <option value="2">CA - Naval Medical Center (San Diego)</option>
            <option value="1">CA - Santa Clara Valley Medical Center</option>
            <option value="4">CA - Stanford Health Care-Sponsored Stanford University</option>
            <option value="4">CA - UCLA David Geffen School of Medicine/UCLA Medical Center</option>
            <option value="4">CA - University of California (Irvine)</option>
            <option value="4">CA - University of California (San Diego) Medical Center</option>
            <option value="4">CA - University of California (San Francisco)</option>
            <option value="1">CA - University of California (San Francisco)/Fresno</option>
            <option value="4">CA - University of California Davis Health</option>
            <option value="4">CA - University of Southern California/LAC+USC Medical Center</option>
            <option value="1">CO - Swedish Medical Center</option>
            <option value="4">CO - University of Colorado</option>
            <option value="2">CT - Bridgeport Hospital/Yale University</option>
            <option value="1">CT - Danbury Hospital</option>
            <option value="1">CT - St Francis Hospital and Medical Center</option>
            <option value="1">CT - Stamford Hospital/Columbia University College of Physicians and Surgeons</option>
            <option value="2">CT - University of Connecticut</option>
            <option value="4">CT - Yale-New Haven Medical Center</option>
            <option value="3">DC - George Washington University</option>
            <option value="2">DC - Howard University</option>
            <option value="3">DC - MedStar Health/Washington Hospital Center</option>
            <option value="2">DC - National Capital Consortium</option>
            <option value="3">DE - Christiana Care Health Services</option>
            <option value="1">FL - Bayfront Health St Petersburg</option>
            <option value="1">FL - HCA Healthcare: East Florida Division GME</option>
            <option value="1">FL - HCA Healthcare/USF Morsani College of Medicine GME: Brandon Regional Hospital</option>
            <option value="1">FL - Memorial Healthcare System, Hollywood, Florida</option>
            <option value="1">FL - Mount Sinai Medical Center of Florida, Inc</option>
            <option value="3">FL - Orlando Health</option>
            <option value="1">FL - University of Central Florida/HCA Healthcare GME (Gainesville)</option>
            <option value="1">FL - University of Central Florida/HCA Healthcare GME (Greater Orlando)</option>
            <option value="1">FL - University of Central Florida/HCA Healthcare GME (Pensacola)</option>
            <option value="4">FL - University of Florida</option>
            <option value="1">FL - University of Florida (Pensacola)</option>
            <option value="3">FL - University of Florida College of Medicine Jacksonville</option>
            <option value="2">FL - University of Miami/Jackson Health System</option>
            <option value="4">FL - University of South Florida Morsani</option>
            <option value="1">GA - Atrium Health Navicent The Medical Center/Mercer University School of Medicine</option>
            <option value="4">GA - Emory University School of Medicine</option>
            <option value="1">GA - HCA Healthcare/Mercer University School of Medicine</option>
            <option value="1">GA - HCA Healthcare/Mercer University School of Medicine/Memorial Health University Medical Center</option>
            <option value="1">GA - Medical College of Georgia</option>
            <option value="1">GA - Morehouse School of Medicine</option>
            <option value="1">GA - Northeast Georgia Medical Center</option>
            <option value="1">GA - Wellstar Health System/Wellstar Atlanta Medical Center</option>
            <option value="1">HI - Tripler Army Medical Center</option>
            <option value="2">HI - University of Hawaii</option>
            <option value="3">IA - University of Iowa Hospitals and Clinics</option>
            <option value="1">IL - Advocate Health Care/Advocate Illinois Masonic Medical Center</option>
            <option value="3">IL - Advocate Health Care/Advocate Lutheran General Hospital</option>
            <option value="1">IL - Ascension Illinois/Saint Alexius</option>
            <option value="1">IL - Ascension Illinois/Saint Joseph (Chicago)</option>
            <option value="1">IL - Carle Foundation Hospital</option>
            <option value="3">IL - Loyola University Medical Center</option>
            <option value="4">IL - McGaw Medical Center of Northwestern University</option>
            <option value="1">IL - Mount Sinai Hospital Medical Center of Chicago</option>
            <option value="3">IL - Rush University Medical Center</option>
            <option value="1">IL - Southern Illinois University</option>
            <option value="4">IL - University of Chicago</option>
            <option value="3">IL - University of Illinois College of Medicine at Chicago</option>
            <option value="1">IL - University of Illinois College of Medicine at Peoria</option>
            <option value="1">IN - Ascension St Vincent Hospital Indianapolis</option>
            <option value="2">IN - Indiana University School of Medicine</option>
            <option value="1">KS - HCA Healthcare Kansas City/Overland Park Regional Medical Center</option>
            <option value="1">KS - University of Kansas (Wichita)</option>
            <option value="2">KS - University of Kansas School of Medicine</option>
            <option value="1">KY - Saint Joseph Hospital</option>
            <option value="2">KY - University of Kentucky College of Medicine</option>
            <option value="1">KY - University of Kentucky College of Medicine (Bowling Green)</option>
            <option value="1">KY - University of Louisville School of Medicine</option>
            <option value="2">LA - Louisiana State University (Shreveport)</option>
            <option value="3">LA - Louisiana State University School of Medicine</option>
            <option value="1">LA - Louisiana State University School of Medicine (Baton Rouge)</option>
            <option value="1">LA - Ochsner Clinic Foundation</option>
            <option value="2">LA - Tulane University</option>
            <option value="4">MA - Beth Israel Deaconess Medical Center</option>
            <option value="3">MA - Boston University Medical Center</option>
            <option value="4">MA - Brigham and Women's Hospital/Massachusetts General Hospital</option>
            <option value="4">MA - Tufts Medical Center</option>
            <option value="1">MA - UMMS-Baystate</option>
            <option value="2">MA - University of Massachusetts</option>
            <option value="1">MD - Anne Arundel Medical Center</option>
            <option value="4">MD - Johns Hopkins University</option>
            <option value="1">MD - Sinai Hospital of Baltimore</option>
            <option value="2">MD - University of Maryland</option>
            <option value="2">ME - Maine Medical Center</option>
            <option value="1">MI - Ascension Genesys Hospital</option>
            <option value="1">MI - Ascension Macomb-Oakland Hospital</option>
            <option value="1">MI - Ascension St John Hospital</option>
            <option value="1">MI - Beaumont Health (Dearborn)</option>
            <option value="2">MI - Beaumont Health (Farmington Hills)</option>
            <option value="4">MI - Beaumont Health (Royal Oak)</option>
            <option value="1">MI - Beaumont Health (Trenton)</option>
            <option value="1">MI - Central Michigan University College of Medicine</option>
            <option value="2">MI - Detroit Medical Center/Wayne State University</option>
            <option value="1">MI - Garden City Hospital</option>
            <option value="1">MI - Henry Ford Health/Henry Ford Macomb Hospital</option>
            <option value="1">MI - Henry Ford Health/Henry Ford Wyandotte Hospital</option>
            <option value="2">MI - Henry Ford Hospital/Wayne State University</option>
            <option value="1">MI - Hurley Medical Center/Michigan State University</option>
            <option value="1">MI - McLaren Health Care/Greater Lansing/MSU</option>
            <option value="1">MI - McLaren Health Care/Macomb/MSU</option>
            <option value="1">MI - Metro Health University of Michigan Health (Metro Health)</option>
            <option value="1">MI - Sparrow Hospital/Michigan State University</option>
            <option value="2">MI - Spectrum Health/Michigan State University</option>
            <option value="2">MI - St Joseph Mercy Ann Arbor</option>
            <option value="1">MI - St Joseph Mercy-Oakland</option>
            <option value="1">MI - Trinity Health Muskegon</option>
            <option value="4">MI - University of Michigan Health System</option>
            <option value="1">MI - Western Michigan University Homer Stryker MD School of Medicine</option>
            <option value="4">MN - Mayo Clinic College of Medicine and Science (Rochester)</option>
            <option value="2">MN - University of Minnesota</option>
            <option value="1">MO - Mercy Hospital (St Louis)</option>
            <option value="3">MO - St Louis University School of Medicine</option>
            <option value="2">MO - University of Missouri-Columbia</option>
            <option value="1">MO - University of Missouri-Kansas City School of Medicine</option>
            <option value="4">MO - Washington University/B-JH/SLCH Consortium</option>
            <option value="2">MS - University of Mississippi Medical Center</option>
            <option value="1">NC - Campbell University</option>
            <option value="3">NC - Carolinas Medical Center</option>
            <option value="4">NC - Duke University Hospital</option>
            <option value="3">NC - Mountain Area Health Education Center</option>
            <option value="1">NC - Novant Health New Hanover Regional Medical Center</option>
            <option value="4">NC - University of North Carolina Hospitals</option>
            <option value="3">NC - Vidant Medical Center/East Carolina University</option>
            <option value="4">NC - Wake Forest University Baptist Medical Center</option>
            <option value="1">NC - Womack Army Medical Center</option>
            <option value="1">NE - Creighton University School of Medicine (Omaha)</option>
            <option value="1">NE - University of Nebraska Medical Center College of Medicine</option>
            <option value="2">NH - Dartmouth-Hitchcock/Mary Hitchcock Memorial Hospital</option>
            <option value="2">NJ - Atlantic Health System/Morristown Medical Center</option>
            <option value="1">NJ - Cooper Medical School of Rowan University/Cooper University Hospital</option>
            <option value="1">NJ - Hackensack University Medical Center</option>
            <option value="1">NJ - Inspira Health Network/Inspira Medical Center Vineland</option>
            <option value="1">NJ - Jefferson Health New Jersey</option>
            <option value="1">NJ - Jersey Shore University Medical Center</option>
            <option value="3">NJ - Rutgers Health/Cooperman Barnabas Medical Center</option>
            <option value="1">NJ - Rutgers Health/Jersey City Medical Center</option>
            <option value="2">NJ - Rutgers Health/Monmouth Medical Center</option>
            <option value="3">NJ - Rutgers Health/New Jersey Medical School</option>
            <option value="2">NJ - Rutgers Health/Newark Beth Israel Medical Center</option>
            <option value="3">NJ - Rutgers Health/Robert Wood Johnson Medical School</option>
            <option value="3">NJ - Saint Peter's University Hospital/Rutgers Robert Wood Johnson Medical School</option>
            <option value="1">NJ - Virtua</option>
            <option value="3">NM - University of New Mexico School of Medicine</option>
            <option value="1">NV - HCA Healthcare Sunrise Health Graduate Medical Education</option>
            <option value="1">NV - Kirk Kerkorian School of Medicine at UNLV</option>
            <option value="1">NY - Albany Medical Center</option>
            <option value="1">NY - Bronx</option>
            <option value="1">NY - BronxCare Health System</option>
            <option value="1">NY - Brooklyn Hospital Center</option>
            <option value="1">NY - Flushing Hospital Medical Center</option>
            <option value="1">NY - Good Samaritan Hospital Medical Center</option>
            <option value="4">NY - Icahn School of Medicine at Mount Sinai/Mount Sinai Hospital</option>
            <option value="1">NY - Icahn School of Medicine at Mount Sinai/NYC Health and Hospitals (Queens)</option>
            <option value="3">NY - Icahn School of Medicine at Mount Sinai/South Nassau</option>
            <option value="3">NY - Icahn School of Medicine at Mount Sinai/West</option>
            <option value="1">NY - Jamaica Hospital Medical Center</option>
            <option value="1">NY - Lincoln Medical and Mental Health Center</option>
            <option value="2">NY - Maimonides Medical Center</option>
            <option value="4">NY - Montefiore Medical Center/Albert Einstein College of Medicine</option>
            <option value="1">NY - Nassau University Medical Center</option>
            <option value="2">NY - New York Medical College at Westchester Medical Center</option>
            <option value="4">NY - New York Presbyterian Hospital (Columbia Campus)</option>
            <option value="4">NY - New York Presbyterian Hospital (Cornell Campus)</option>
            <option value="2">NY - New York-Presbyterian Brooklyn Methodist Hospital</option>
            <option value="1">NY - NYC Health & Hospitals/South Brooklyn Health</option>
            <option value="4">NY - NYU Grossman School of Medicine</option>
            <option value="3">NY - NYU Long Island School of Medicine</option>
            <option value="1">NY - Richmond University Medical Center</option>
            <option value="1">NY - Rochester General Hospital</option>
            <option value="1">NY - St John's Episcopal Hospital-South Shore</option>
            <option value="3">NY - Stony Brook Medicine/University Hospital</option>
            <option value="3">NY - SUNY Downstate Health Sciences University</option>
            <option value="2">NY - SUNY Upstate Medical University</option>
            <option value="1">NY - University at Buffalo</option>
            <option value="1">NY - University at Buffalo (Sisters of Charity)</option>
            <option value="3">NY - University of Rochester</option>
            <option value="1">NY - Wyckoff Heights Medical Center</option>
            <option value="4">NY - Zucker School of Medicine at Hofstra/Northwell</option>
            <option value="4">NY - Zucker School of Medicine at Hofstra/Northwell at Lenox Hill Hospital</option>
            <option value="4">NY - Zucker School of Medicine at Hofstra/Northwell at South Shore University Hospital</option>
            <option value="4">NY - Zucker School of Medicine at Hofstra/Northwell at Staten Island University Hospital</option>
            <option value="2">OH - Akron General Medical Center/NEOMED</option>
            <option value="1">OH - Aultman Hospital/NEOMED</option>
            <option value="3">OH - Case Western Reserve University/University Hospitals Cleveland Medical Center</option>
            <option value="4">OH - Cleveland Clinic Foundation</option>
            <option value="1">OH - Kettering Health Network</option>
            <option value="1">OH - Mercy St Vincent Medical Center</option>
            <option value="4">OH - Ohio State University/Mt Carmel Hospital</option>
            <option value="1">OH - OhioHealth/Doctors Hospital</option>
            <option value="2">OH - OhioHealth/Riverside Methodist Hospital</option>
            <option value="1">OH - Summa Health System/NEOMED</option>
            <option value="3">OH - The MetroHealth System/Case Western Reserve University</option>
            <option value="2">OH - TriHealth (Bethesda North and Good Samaritan Hospitals)</option>
            <option value="3">OH - University of Cincinnati Medical Center/College of Medicine</option>
            <option value="1">OH - University of Toledo</option>
            <option value="3">OH - Wright State University</option>
            <option value="2">OK - Oklahoma State University Center for Health Sciences</option>
            <option value="2">OK - Osteopathic Medical Education Consortium of Oklahoma, Inc. (OMECO)/Oklahoma State University</option>
            <option value="1">OK - St Anthony Hospital</option>
            <option value="3">OK - University of Oklahoma Health Sciences Center</option>
            <option value="1">OK - University of Oklahoma School of Community Medicine (Tulsa)</option>
            <option value="3">OR - Oregon Health & Science University</option>
            <option value="4">PA - Abington Memorial Hospital</option>
            <option value="1">PA - Albert Einstein Healthcare Network</option>
            <option value="2">PA - Allegheny Health Network Medical Education Consortium (WPH)</option>
            <option value="1">PA - Crozier-Chester Medical Center</option>
            <option value="3">PA - Geisinger Health System</option>
            <option value="4">PA - Hospital of the University of Pennsylvania</option>
            <option value="3">PA - Lehigh Valley Health Network</option>
            <option value="1">PA - Main Line Health System/Lankenau Medical Center</option>
            <option value="1">PA - Penn State Milton S Hershey Medical Center</option>
            <option value="4">PA - Pennsylvania Hospital of the University of Pennsylvania Health System</option>
            <option value="3">PA - Sidney Kimmel Medical College at Thomas Jefferson University/TJUH</option>
            <option value="1">PA - St Joseph's University Medical Center</option>
            <option value="2">PA - St Luke's University Hospital</option>
            <option value="2">PA - Temple University Hospital</option>
            <option value="1">PA - Tower Health/Phoenixville Hospital</option>
            <option value="2">PA - Tower Health/Reading Hospital</option>
            <option value="4">PA - UPMC Medical Education</option>
            <option value="1">PA - UPMC Medical Education (Harrisburg)</option>
            <option value="1">PA - Wellspan Health/York Hospital</option>
            <option value="1">PR - Hospital Episcopal San Lucas/Ponce School of Medicine</option>
            <option value="1">PR - San Juan City Hospital</option>
            <option value="1">PR - University of Puerto Rico</option>
            <option value="4">RI - Women and Infants Hospital of Rhode Island/Brown University</option>
            <option value="4">SC - Medical University of South Carolina</option>
            <option value="1">SC - Prisma Health/University of South Carolina SOM Columbia (Columbia)</option>
            <option value="2">SC - Prisma Health/University of South Carolina SOM Greenville (Greenville)</option>
            <option value="1">TN - Baptist Memorial Medical Education</option>
            <option value="1">TN - East Tennessee State University/Quillen College of Medicine</option>
            <option value="1">TN - Meharry Medical College</option>
            <option value="2">TN - University of Tennessee</option>
            <option value="1">TN - University of Tennessee College of Medicine (Nashville)</option>
            <option value="1">TN - University of Tennessee College of Medicine at Chattanooga</option>
            <option value="2">TN - University of Tennessee Medical Center at Knoxville</option>
            <option value="4">TN - Vanderbilt University Medical Center</option>
            <option value="1">TX - Baylor All Saints Medical Center Fort Worth</option>
            <option value="4">TX - Baylor College of Medicine</option>
            <option value="2">TX - Baylor University Medical Center</option>
            <option value="1">TX - HCA Healthcare Las Palmas Del Sol</option>
            <option value="1">TX - HCA Houston Healthcare (West)/University of Houston</option>
            <option value="1">TX - HCA Medical City Healthcare UNT-TCU Graduate Medical Education</option>
            <option value="1">TX - John Peter Smith Hospital (Tarrant County Hospital District)</option>
            <option value="1">TX - Methodist Health System Dallas</option>
            <option value="1">TX - Methodist Hospital (Houston)</option>
            <option value="1">TX - San Antonio Uniformed Services Health Education Consortium</option>
            <option value="1">TX - St. David's Healthcare Graduate Medical Education</option>
            <option value="3">TX - Texas A&M College of Medicine-Scott and White Medical Center (Temple)</option>
            <option value="1">TX - Texas Tech University (Amarillo)</option>
            <option value="1">TX - Texas Tech University (Permian Basin)</option>
            <option value="1">TX - Texas Tech University Health Sciences Center at Lubbock</option>
            <option value="1">TX - Texas Tech University HSC El Paso</option>
            <option value="1">TX - Texas Tech University HSC El Paso</option>
            <option value="3">TX - University of Texas at Austin Dell Medical School</option>
            <option value="3">TX - University of Texas Health Science Center at Houston</option>
            <option value="3">TX - University of Texas Health Science Center San Antonio Joe and Teresa Lozano Long School of Medicine</option>
            <option value="3">TX - University of Texas Medical Branch Hospitals</option>
            <option value="2">TX - University of Texas RGV (DHR)</option>
            <option value="4">TX - University of Texas Southwestern Medical Center</option>
            <option value="4">UT - University of Utah Health</option>
            <option value="3">VA - Carilion Clinic-Virginia Tech Carilion School of Medicine</option>
            <option value="3">VA - Eastern Virginia Medical School</option>
            <option value="2">VA - Inova Fairfax Medical Campus</option>
            <option value="2">VA - Naval Medical Center (Portsmouth)</option>
            <option value="1">VA - Riverside Regional Medical Center</option>
            <option value="4">VA - University of Virginia Medical Center</option>
            <option value="4">VA - Virginia Commonwealth University Health System</option>
            <option value="3">VT - University of Vermont Medical Center</option>
            <option value="1">WA - Madigan Army Medical Center</option>
            <option value="4">WA - University of Washington</option>
            <option value="1">WI - Aurora Health Care</option>
            <option value="2">WI - Medical College of Wisconsin Affiliated Hospitals</option>
            <option value="3">WI - University of Wisconsin Hospitals and Clinics</option>
            <option value="1">WV - Charleston Area Medical Center/CAMC Institute for Academic Medicine</option>
            <option value="1">WV - Marshall University School of Medicine</option>
            <option value="1">WV - West Virginia University</option>
            <option value="1">Other - International or Not Listed</option>
        </select>
        </div>
        <div class="row-inline">
            <label>Residency has an affiliated REI fellowship:</label>
            <input type="checkbox" id="residencyhasfellowship">
        </div>   
        <div class="header2">Research</div> 
        <div class="row-inline">
            <label>At least one first-author manuscript in peer-reviewed journal:</label>
            <input type="checkbox" id="firstauthor">
        </div>
        <div class="row">
            <label>Ongoing research projects / unpublished abstracts or articles (#):</label>
            <input type="number" id="articlesAbstractsOtherthanP" step="1" min="0">
        </div>
        <div class="row">
            <label>Poster presentations at national or regional meetings (#):</label>
            <input type="number" id="posterPresentations" step="1" min="0">
        </div>
        <button type="button" onclick="calculateProbability()">Calculate Probability</button>
    </form>
    <p id="result"></p>
    
    <div class="canvas-container">
        <canvas id="matchHistogram"></canvas>
        <canvas id="noMatchHistogram"></canvas>
    </div>
    
    <script>
    // Probability data from the table
    var probabilityData = [
    { probability: 0.0743026, match: 0, noMatch: 2 },
    { probability: 0.0796319, match: 0, noMatch: 1 },
    { probability: 0.0850157, match: 0, noMatch: 1 },
    { probability: 0.0910378, match: 0, noMatch: 1 },
    { probability: 0.100162, match: 0, noMatch: 1 },
    { probability: 0.1339386, match: 0, noMatch: 1 },
    { probability: 0.1586948, match: 0, noMatch: 1 },
    { probability: 0.1700183, match: 0, noMatch: 1 },
    { probability: 0.1702833, match: 1, noMatch: 0 },
    { probability: 0.1703479, match: 0, noMatch: 1 },
    { probability: 0.1808712, match: 0, noMatch: 1 },
    { probability: 0.180939, match: 0, noMatch: 1 },
    { probability: 0.1857269, match: 0, noMatch: 1 },
    { probability: 0.1860109, match: 0, noMatch: 1 },
    { probability: 0.1919652, match: 0, noMatch: 1 },
    { probability: 0.2036448, match: 0, noMatch: 3 },
    { probability: 0.2156903, match: 0, noMatch: 1 },
    { probability: 0.2157677, match: 0, noMatch: 1 },
    { probability: 0.2215517, match: 0, noMatch: 1 },
    { probability: 0.2344268, match: 0, noMatch: 1 },
    { probability: 0.234509, match: 0, noMatch: 1 },
    { probability: 0.2406412, match: 0, noMatch: 1 },
    { probability: 0.2478973, match: 0, noMatch: 1 },
    { probability: 0.2542633, match: 0, noMatch: 1 },
    { probability: 0.2543502, match: 0, noMatch: 1 },
    { probability: 0.2608244, match: 1, noMatch: 0 },
    { probability: 0.2684739, match: 1, noMatch: 0 },
    { probability: 0.2723873, match: 0, noMatch: 1 },
    { probability: 0.2729496, match: 0, noMatch: 1 },
    { probability: 0.2829913, match: 0, noMatch: 1 },
    { probability: 0.285132, match: 0, noMatch: 1 },
    { probability: 0.2870333, match: 1, noMatch: 0 },
    { probability: 0.2871269, match: 1, noMatch: 2 },
    { probability: 0.2941065, match: 0, noMatch: 1 },
    { probability: 0.2961382, match: 1, noMatch: 0 },
    { probability: 0.3062616, match: 0, noMatch: 1 },
    { probability: 0.3116127, match: 2, noMatch: 0 },
    { probability: 0.3179848, match: 0, noMatch: 2 },
    { probability: 0.3275195, match: 0, noMatch: 1 },
    { probability: 0.3417356, match: 2, noMatch: 1 },
    { probability: 0.3438328, match: 2, noMatch: 3 },
    { probability: 0.3538316, match: 1, noMatch: 0 },
    { probability: 0.3605229, match: 0, noMatch: 1 },
    { probability: 0.3775571, match: 0, noMatch: 1 },
    { probability: 0.3808024, match: 1, noMatch: 0 },
    { probability: 0.383343, match: 1, noMatch: 0 },
    { probability: 0.3834512, match: 0, noMatch: 1 },
    { probability: 0.3879568, match: 0, noMatch: 1 },
    { probability: 0.3925677, match: 1, noMatch: 0 },
    { probability: 0.3948991, match: 1, noMatch: 0 },
    { probability: 0.4031275, match: 1, noMatch: 0 },
    { probability: 0.4056627, match: 1, noMatch: 0 },
    { probability: 0.4125098, match: 1, noMatch: 0 },
    { probability: 0.4174385, match: 1, noMatch: 0 },
    { probability: 0.4185826, match: 1, noMatch: 0 },
    { probability: 0.4280666, match: 1, noMatch: 0 },
    { probability: 0.4292354, match: 0, noMatch: 1 },
    { probability: 0.4443688, match: 0, noMatch: 1 },
    { probability: 0.452154, match: 2, noMatch: 0 },
    { probability: 0.4594817, match: 0, noMatch: 3 },
    { probability: 0.464208, match: 1, noMatch: 0 },
    { probability: 0.4674338, match: 0, noMatch: 1 },
    { probability: 0.4813124, match: 1, noMatch: 0 },
    { probability: 0.4885917, match: 2, noMatch: 0 },
    { probability: 0.4956562, match: 0, noMatch: 1 },
    { probability: 0.5019222, match: 0, noMatch: 1 },
    { probability: 0.51022, match: 1, noMatch: 0 },
    { probability: 0.5104992, match: 0, noMatch: 1 },
    { probability: 0.5150771, match: 1, noMatch: 0 },
    { probability: 0.5154546, match: 1, noMatch: 1 },
    { probability: 0.5177644, match: 0, noMatch: 1 },
    { probability: 0.5264401, match: 1, noMatch: 0 },
    { probability: 0.5386176, match: 1, noMatch: 0 },
    { probability: 0.5675899, match: 1, noMatch: 0 },
    { probability: 0.5698732, match: 1, noMatch: 0 },
    { probability: 0.5724514, match: 0, noMatch: 1 },
    { probability: 0.5727271, match: 0, noMatch: 1 },
    { probability: 0.6007636, match: 0, noMatch: 1 },
    { probability: 0.6078277, match: 1, noMatch: 0 },
    { probability: 0.6109285, match: 0, noMatch: 1 },
    { probability: 0.6112736, match: 1, noMatch: 0 },
    { probability: 0.6181759, match: 1, noMatch: 0 },
    { probability: 0.6199146, match: 1, noMatch: 0 },
    { probability: 0.6204645, match: 1, noMatch: 0 },
    { probability: 0.63294, match: 0, noMatch: 1 },
    { probability: 0.6331303, match: 0, noMatch: 1 },
    { probability: 0.6352898, match: 2, noMatch: 0 },
    { probability: 0.638638, match: 0, noMatch: 1 },
    { probability: 0.6499534, match: 1, noMatch: 1 },
    { probability: 0.6646998, match: 1, noMatch: 0 },
    { probability: 0.6664116, match: 1, noMatch: 0 },
    { probability: 0.6753394, match: 1, noMatch: 0 },
    { probability: 0.6918511, match: 0, noMatch: 1 },
    { probability: 0.6983508, match: 1, noMatch: 0 },
    { probability: 0.7000716, match: 1, noMatch: 0 },
    { probability: 0.7031029, match: 0, noMatch: 1 },
    { probability: 0.7102157, match: 1, noMatch: 0 },
    { probability: 0.7142809, match: 1, noMatch: 0 },
    { probability: 0.7152059, match: 1, noMatch: 0 },
    { probability: 0.7221433, match: 1, noMatch: 0 },
    { probability: 0.7238317, match: 0, noMatch: 1 },
    { probability: 0.7328767, match: 0, noMatch: 1 },
    { probability: 0.7365829, match: 0, noMatch: 1 },
    { probability: 0.7398003, match: 1, noMatch: 0 },
    { probability: 0.7411274, match: 1, noMatch: 0 },
    { probability: 0.7412488, match: 1, noMatch: 0 },
    { probability: 0.7431866, match: 1, noMatch: 0 },
    { probability: 0.7437636, match: 1, noMatch: 0 },
    { probability: 0.746954, match: 0, noMatch: 1 },
    { probability: 0.754752, match: 1, noMatch: 0 },
    { probability: 0.7559139, match: 0, noMatch: 1 },
    { probability: 0.7564647, match: 0, noMatch: 1 },
    { probability: 0.7569008, match: 1, noMatch: 0 },
    { probability: 0.7605318, match: 0, noMatch: 1 },
    { probability: 0.7679292, match: 0, noMatch: 1 },
    { probability: 0.7701092, match: 0, noMatch: 1 },
    { probability: 0.7726625, match: 0, noMatch: 1 },
    { probability: 0.7734585, match: 1, noMatch: 0 },
    { probability: 0.7795553, match: 0, noMatch: 1 },
    { probability: 0.7812189, match: 1, noMatch: 0 },
    { probability: 0.7828058, match: 1, noMatch: 0 },
    { probability: 0.7861593, match: 1, noMatch: 0 },
    { probability: 0.7982017, match: 0, noMatch: 1 },
    { probability: 0.8016299, match: 1, noMatch: 0 },
    { probability: 0.8035432, match: 1, noMatch: 0 },
    { probability: 0.8073621, match: 1, noMatch: 0 },
    { probability: 0.8089037, match: 1, noMatch: 1 },
    { probability: 0.8141518, match: 1, noMatch: 0 },
    { probability: 0.8149608, match: 1, noMatch: 0 },
    { probability: 0.8196622, match: 1, noMatch: 0 },
    { probability: 0.8200795, match: 1, noMatch: 0 },
    { probability: 0.8281233, match: 1, noMatch: 0 },
    { probability: 0.8306233, match: 1, noMatch: 0 },
    { probability: 0.8406693, match: 2, noMatch: 0 },
    { probability: 0.8557466, match: 1, noMatch: 0 },
    { probability: 0.8590205, match: 1, noMatch: 0 },
    { probability: 0.8615904, match: 1, noMatch: 0 },
    { probability: 0.8645455, match: 1, noMatch: 0 },
    { probability: 0.8676506, match: 0, noMatch: 1 },
    { probability: 0.8758287, match: 1, noMatch: 1 },
    { probability: 0.8804956, match: 2, noMatch: 0 },
    { probability: 0.8870532, match: 3, noMatch: 0 },
    { probability: 0.8895439, match: 1, noMatch: 0 },
    { probability: 0.8904011, match: 1, noMatch: 0 },
    { probability: 0.8908876, match: 1, noMatch: 0 },
    { probability: 0.8941786, match: 1, noMatch: 0 },
    { probability: 0.8950562, match: 1, noMatch: 0 },
    { probability: 0.8959646, match: 1, noMatch: 0 },
    { probability: 0.9009048, match: 3, noMatch: 0 },
    { probability: 0.9017327, match: 3, noMatch: 0 },
    { probability: 0.9043196, match: 1, noMatch: 0 },
    { probability: 0.9047317, match: 1, noMatch: 0 },
    { probability: 0.9055651, match: 1, noMatch: 0 },
    { probability: 0.9110413, match: 1, noMatch: 0 },
    { probability: 0.9159048, match: 1, noMatch: 0 },
    { probability: 0.9200967, match: 1, noMatch: 0 },
    { probability: 0.9213714, match: 1, noMatch: 1 },
    { probability: 0.9241403, match: 2, noMatch: 1 },
    { probability: 0.9253131, match: 1, noMatch: 0 },
    { probability: 0.9266723, match: 1, noMatch: 0 },
    { probability: 0.9303257, match: 1, noMatch: 0 },
    { probability: 0.9307167, match: 3, noMatch: 0 },
    { probability: 0.9313108, match: 1, noMatch: 0 },
    { probability: 0.93134, match: 1, noMatch: 0 },
    { probability: 0.9316005, match: 1, noMatch: 0 },
    { probability: 0.9352885, match: 2, noMatch: 0 },
    { probability: 0.9368773, match: 1, noMatch: 0 },
    { probability: 0.9379023, match: 1, noMatch: 0 },
    { probability: 0.9395782, match: 1, noMatch: 0 },
    { probability: 0.940127, match: 2, noMatch: 0 },
    { probability: 0.9436007, match: 4, noMatch: 0 },
    { probability: 0.944091, match: 1, noMatch: 0 },
    { probability: 0.9444783, match: 1, noMatch: 0 },
    { probability: 0.9453993, match: 2, noMatch: 0 },
    { probability: 0.9473704, match: 2, noMatch: 0 },
    { probability: 0.9490553, match: 2, noMatch: 1 },
    { probability: 0.9499669, match: 1, noMatch: 0 },
    { probability: 0.9509013, match: 3, noMatch: 0 },
    { probability: 0.9513525, match: 1, noMatch: 0 },
    { probability: 0.9524788, match: 2, noMatch: 0 },
    { probability: 0.9529162, match: 1, noMatch: 0 },
    { probability: 0.9530224, match: 1, noMatch: 0 },
    { probability: 0.9531298, match: 1, noMatch: 0 },
    { probability: 0.9539721, match: 1, noMatch: 0 },
    { probability: 0.954008, match: 2, noMatch: 0 },
    { probability: 0.9542067, match: 1, noMatch: 0 },
    { probability: 0.9556829, match: 1, noMatch: 0 },
    { probability: 0.9565701, match: 1, noMatch: 0 },
    { probability: 0.9571137, match: 2, noMatch: 0 },
    { probability: 0.9586805, match: 2, noMatch: 0 },
    { probability: 0.9600185, match: 2, noMatch: 0 },
    { probability: 0.961315, match: 1, noMatch: 0 },
    { probability: 0.9614834, match: 1, noMatch: 0 },
    { probability: 0.962016, match: 1, noMatch: 0 },
    { probability: 0.9627342, match: 1, noMatch: 0 },
    { probability: 0.9664041, match: 1, noMatch: 0 },
    { probability: 0.967643, match: 1, noMatch: 0 },
    { probability: 0.9697241, match: 2, noMatch: 0 },
    { probability: 0.9708441, match: 1, noMatch: 0 },
    { probability: 0.9719239, match: 2, noMatch: 0 },
    { probability: 0.9728453, match: 1, noMatch: 0 },
    { probability: 0.9729649, match: 1, noMatch: 0 },
    { probability: 0.973853, match: 1, noMatch: 0 },
    { probability: 0.9747127, match: 1, noMatch: 0 },
    { probability: 0.9755448, match: 1, noMatch: 0 },
    { probability: 0.9764548, match: 1, noMatch: 0 },
    { probability: 0.9772309, match: 1, noMatch: 0 },
    { probability: 0.9773316, match: 1, noMatch: 0 },
    { probability: 0.9780796, match: 2, noMatch: 0 },
    { probability: 0.9781766, match: 1, noMatch: 0 },
    { probability: 0.9788033, match: 1, noMatch: 0 },
    { probability: 0.9795036, match: 1, noMatch: 0 },
    { probability: 0.9795945, match: 1, noMatch: 0 },
    { probability: 0.9802693, match: 1, noMatch: 0 },
    { probability: 0.9816357, match: 1, noMatch: 0 },
    { probability: 0.9822443, match: 1, noMatch: 0 },
    { probability: 0.9846241, match: 2, noMatch: 0 },
    { probability: 0.9846926, match: 1, noMatch: 0 },
    { probability: 0.9861693, match: 1, noMatch: 0 },
    { probability: 0.9862311, match: 1, noMatch: 0 },
    { probability: 0.9871325, match: 1, noMatch: 0 },
    { probability: 0.9880295, match: 1, noMatch: 0 },
    { probability: 0.9888647, match: 2, noMatch: 0 },
    { probability: 0.9889145, match: 1, noMatch: 0 },
    { probability: 0.9892362, match: 1, noMatch: 0 },
    { probability: 0.9906878, match: 1, noMatch: 0 },
    { probability: 0.9932675, match: 1, noMatch: 0 },
    { probability: 0.9938973, match: 1, noMatch: 0 },
    { probability: 0.9944755, match: 1, noMatch: 0 },
    { probability: 0.9962562, match: 1, noMatch: 0 }
];


var consolidatedData = new Array(20).fill(null).map(() => ({ match: 0, noMatch: 0 }));
function getBinIndex(probability) {
    return Math.min(Math.floor(probability * 20), 19); // Ensure the max index is 19
}
probabilityData.forEach(item => {
    var index = getBinIndex(item.probability);
    consolidatedData[index].match += item.match;
    consolidatedData[index].noMatch += item.noMatch;
});
var displayData = consolidatedData.map((data, index) => ({
    probabilityRange: `${(index * 5)}% - ${(index * 5 + 5)}%`,
    match: data.match,
    noMatch: data.noMatch
}));
console.log(displayData);

// Initialize the histograms when the page is loaded
var matchChart, noMatchChart;
document.addEventListener('DOMContentLoaded', function () {
    var ctxMatch = document.getElementById('matchHistogram').getContext('2d');
    var ctxNoMatch = document.getElementById('noMatchHistogram').getContext('2d');
    
    // Prepare data for the histograms using 'displayData' instead of 'probabilityData'
    var matchLabels = displayData.map(item => item.probabilityRange);
    var matchCounts = displayData.map(item => item.match);
    var noMatchCounts = displayData.map(item => item.noMatch);

    // Match histogram
    matchChart = new Chart(ctxMatch, {
        type: 'bar',
        data: {
            labels: matchLabels,
            datasets: [{
                label: 'Matched',
                data: matchCounts,
                backgroundColor: '#3f94b9',
                borderColor: '#286973',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true,
                    suggestedMax: 70
                }
            },
            plugins: {
                title: {
                    display: true,
                    text: 'Matched applicants: Predicted probability distribution (n=199)',
                    font: {
                        size: 14
                    }
                }
            }
        }
    });

    // No match histogram
    noMatchChart = new Chart(ctxNoMatch, {
        type: 'bar',
        data: {
            labels: matchLabels,
            datasets: [{
                label: 'Did Not Match',
                data: noMatchCounts,
                backgroundColor: '#e16d00',
                borderColor: '#b45600',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true,
                    suggestedMax: 70
                }
            },
            plugins: {
                title: {
                    display: true,
                    text: 'Unmatched applicants: Predicted probability distribution (n=87)',
                    font: {
                        size: 14
                    }
                }
            }
        }
    });
});

    
function calculateProbability() {
    var medschooltype = document.querySelector('input[name="medschooltype"]:checked').value;
    var type2 = medschooltype === "2" ? 1 : 0;
    var type3 = medschooltype === "3" ? 1 : 0;
    var fellowship = document.getElementById("residencyhasfellowship").checked ? 1 : 0;
    var firstAuthor = document.getElementById("firstauthor").checked ? 1 : 0;
    var doximity = parseFloat(document.getElementById("doximityCategory4").value);
    var articles = parseFloat(document.getElementById("articlesAbstractsOtherthanP").value);
    var presentations = parseFloat(document.getElementById("posterPresentations").value);

    var logOdds = -2.183783 - 1.012403 * type2 - 0.9373608 * type3 + 1.515319 * fellowship
                  + 0.6006193 * doximity + 0.7174076 * firstAuthor + 0.2538096 * articles
                  + 0.0731652 * presentations;
    var probability = 1 / (1 + Math.exp(-logOdds));
    var percentProbability = (probability * 100).toFixed(2); // Convert probability to percentage

    var tooltipText = "This probability is based on items in the written Electronic Residency Application Service (ERAS®) application and does not account for information in the personal statement, letters of recommendation, interview performance, in-person evaluation, or other parameters not listed below.<br><br>The following variables were evaluated as potential predictors: age, sex, race, ethnicity, citizenship/work authorization, medical school type, region of U.S. medical school, additional advanced degree, USMLE Step scores, CREOG scores, region of U.S. residency, residency ranking, residency affiliation with an REI fellowship, number of research/work/volunteer experiences, number of first-author publications, total articles published, unpublished articles/abstracts, book chapters, oral and poster presentations, and online publications.";

    // Update result text with conditions
var resultText = `<strong>Predicted Probability of Match:</strong> <span class="tooltip">${percentProbability}%<span class="tooltiptext">${tooltipText}</span></span><br><br>`; // Added <br><br> for spacing and <strong> for bold

if (parseFloat(percentProbability) < 40) {
    resultText += "Predicted probability of <40% indicates a low likelihood of match.<br><br> Using a 40% cutoff, the model exhibited high sensitivity (>90%) and a low false negative rate (<10%). Almost all of the applications that resulted in a successful match had a predicted probability of at least 40%.";
} else if (parseFloat(percentProbability) >= 40 && parseFloat(percentProbability) < 70) {
    resultText += "Predicted probability of <70% indicates a lower-than-average likelihood of a match.<br><br> Using a 70% cutoff, sensitivity and specificity of the model were both 75.9% (i.e. in most cases, the model correctly predicted the applicant's match result).";
} else if (parseFloat(percentProbability) >= 70 && parseFloat(percentProbability) <= 80) {
    resultText += "Predicted probability of >70% indicates a higher-than-average likelihood of match.<br><br> Using a 70% cutoff, sensitivity and specificity of the model were both 75.9% (i.e. in most cases, the model correctly predicted the applicant's match result).";
} else {
    resultText += "Predicted probability of >80% indicates a very high likelihood of match.<br><br> At this cutoff, the model exhibited high specificity (>90%) and a low false positive rate (<10%). Almost all of the applications with a predicted probability >80% resulted in a successful match."
}

document.getElementById("result").innerHTML = resultText;

// Update charts with the calculated probability percentage
updateCharts(percentProbability);
}





function updateCharts(probabilityPercent) {
    // Calculate bin index for predicted probability
    let binIndex = Math.floor(probabilityPercent / 5);
    if (binIndex >= 20) binIndex = 19; // Ensure it doesn't exceed the index for the last bin

    // Define annotation for the vertical line for predicted probability
    const probabilityAnnotation = {
        type: 'line',
        xMin: binIndex,
        xMax: binIndex,
        borderColor: '#a40000', 
        borderWidth: 2,
        borderDash: [6, 6], // Keeping it dotted
        label: {
            content: 'Your score: ' + probabilityPercent + '%',
            enabled: true,
            position: "end",
            yAdjust: -50, // Move the label up by 50 pixels
            backgroundColor: '#a40000',
            font: {
                size: 12 // Optional: Adjust font size here if needed 
            }
        }
    };

    
    const optimalScoreAnnotation = {
        type: 'line',
        xMin: 14, // This corresponds to the 70-75% bin
        xMax: 14,
        borderColor: '#707070', 
        borderDash: [6, 6], // Keeping it dotted for the optimal score line
        label: {
            content: 'Average (all applicants): 70%',
            enabled: true,
            position: "end",
            yAdjust: -120, // Move the label up
            backgroundColor: '#707070',
            font: {
                size: 12 // Optional: Adjust font size here if needed
            }
        }
    };


    // Check if charts have been initialized
    if (matchChart && noMatchChart) {
        matchChart.options.plugins.annotation = {
            annotations: {
                probabilityLine: probabilityAnnotation,
                optimalLine: optimalScoreAnnotation
            }
        };
        noMatchChart.options.plugins.annotation = {
            annotations: {
                probabilityLine: probabilityAnnotation,
                optimalLine: optimalScoreAnnotation
            }
        };

        // Update charts
        matchChart.update();
        noMatchChart.update();

        // Add hover functionality for optimal line
        document.querySelectorAll('.optimalLine').forEach(function(element) {
            element.setAttribute('title', tooltipText);
        });
    } else {
        console.error("Charts not initialized");
    }
}


    </script>
    </body>
    </html>
